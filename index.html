<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="//cdn.jsdelivr.net/phaser/2.5.0/phaser.min.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {
        
        //  Note that this html file is set to pull down Phaser 2.5.0 from the JS Delivr CDN.
        //  Although it will work fine with this tutorial, it's almost certainly not the most current version.
        //  Be sure to replace it with an updated version before you start experimenting with adding your own code.

        var game = new Phaser.Game(1024, 768, Phaser.AUTO, 'mummy', { preload: preload, create: create, update: update });
        var mummy;
        var soldier;
        
    function preload () {
        game.load.spritesheet('mummy', 'images/sprite/mummy.png', 37, 45, 18);
        game.load.spritesheet('girl', 'images/sprite/girl.png', 304, 255, 190);
        game.load.spritesheet('soldier', 'images/sprite/walkingtrooper.png', 64, 64, 17);
       
        game.load.tilemap('map', 'images/ROARmap1.json', null, Phaser.Tilemap.TILED_JSON);
        game.load.image('tiles', 'images/CastleExample.png');
        game.load.image('tiles2','images/base_out_atlas.png');
        game.load.image('tiles3','images/terrain_atlas.png');
    }
        
        var map;
        var layer;
        var layerColision;
        
        
    function create () { 

        var girl = game.add.sprite(game.world.centerX, game.world.centerY, 'girl');

         mummy = game.add.sprite(game.world.centerX, game.world.centerY, 'mummy');
        mummy.anchor.setTo(0.5, 0.5);

        var girl = game.add.sprite(game.world.centerX, game.world.centerY, 'girl');

        girl.anchor.setTo(0.7, 0.7);

        var walk = girl.animations.add('walk');

        girl.animations.play('walk', 10, true);        
          
              
         mummy = game.add.sprite(game.world.centerX, game.world.centerY, 'mummy');

        var walk = mummy.animations.add('walk');

        mummy.animations.play('walk', 10, true);
        //sprite = game.add.tileSprite(0, 0, 800, 600, 'mummy');
        mummy.animations.add('walk');
        mummy.animations.play('walk', 20, true);
        //mummy.anchor.setTo(0.5, 0.5);
        mummy = game.add.sprite(300, 200, 'mummy');

        //  Here we add a new animation called 'walk'
        //  Because we didn't give any other parameters it's going to make an animation from all available frames in the 'mummy' sprite sheet
        var walk = mummy.animations.add('walk');

        //  And this starts the animation playing by using its key ("walk")
        //  30 is the frame rate (30fps)
        //  true means it will loop when it finishes
        mummy.animations.play('walk', 10, true);
    //  child = parent.addChild(game.make.sprite(100, 100, 'mummy'));
        girl.animations.play('walk', 10, true);
        
        map = game.add.tilemap('map');
        map.addTilesetImage('CastleExample', 'tiles');
        map.addTilesetImage('life', 'tiles2');
        map.addTilesetImage('base_out_atlas', 'tiles2');
        map.addTilesetImage('life', 'tiles3')
        layer = map.createLayer('Tile Layer 1');
        layer = map.createLayer('Tile Layer 2');
        //layerColision = map.createLayer('colision');
        //map.setCollision(6, true, 'colision');
        map.setCollision(5);
        map.setCollision(6);
        map.setCollision(10);
        map.setCollision(11);
        map.setCollision(13);
        map.setCollision(24);
        map.setCollision(22);
       
        //map.setCollision(6, true, 'colision');
        //layer.debug = true;
        layer.resizeWorld();
        
          
        soldier = game.add.sprite(10, 400, 'soldier'); 
        var walk = soldier.animations.add('walk');
        soldier.animations.play('walk', 40, true);
        
    }

    function update() {

        //count += 0.005;

        //sprite.tileScale.x = 2 + Math.sin(count);
        //sprite.tileScale.y = 2 + Math.cos(count);

        //sprite.x += 1;
        //sprite.y += 1;
        
        soldier.x+= 1;
        if(mummy.x < 750) {
            mummy.x += 2;
            //mummy.y += 2;
        } else {
            mummy.x = 0;
        }
    

        if (game.input.keyboard.isDown(Phaser.Keyboard.LEFT))
    { 
        debugger;
        mummy.x -= 4; 
    
    }
            }
        
};
    </script>
    </body>
</html>